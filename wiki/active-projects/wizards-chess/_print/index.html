<!doctype html><html lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.101.0"><link rel=canonical type=text/html href=https://purdue-arc.github.io/site/wiki/active-projects/wizards-chess/><link rel=alternate type=application/rss+xml href=https://purdue-arc.github.io/site/wiki/active-projects/wizards-chess/index.xml><meta name=robots content="noindex, nofollow"><link rel="shortcut icon" href=/site/favicons/favicon.ico><link rel=apple-touch-icon href=/site/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/site/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/site/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/site/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/site/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/site/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/site/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/site/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/site/favicons/android-192x192.png sizes=192x192><title>Wizard's Chess | Purdue ARC</title><meta name=description content="Building a giant, automated chess board
"><meta property="og:title" content="Wizard's Chess"><meta property="og:description" content="Building a giant, automated chess board
"><meta property="og:type" content="website"><meta property="og:url" content="https://purdue-arc.github.io/site/wiki/active-projects/wizards-chess/"><meta property="og:site_name" content="Purdue ARC"><meta itemprop=name content="Wizard's Chess"><meta itemprop=description content="Building a giant, automated chess board
"><meta name=twitter:card content="summary"><meta name=twitter:title content="Wizard's Chess"><meta name=twitter:description content="Building a giant, automated chess board
"><link rel=preload href=/site/scss/main.min.505db32259e554af32fbaefe47c719d4950cff2f8432a0552a1c0e45ca7f147a.css as=style><link href=/site/scss/main.min.505db32259e554af32fbaefe47c719d4950cff2f8432a0552a1c0e45ca7f147a.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.6.0.min.js integrity=sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK crossorigin=anonymous></script>
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-00000000-0","auto"),ga("send","pageview"))</script><script async src=https://www.google-analytics.com/analytics.js></script></head><body class=td-section><header><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar"><a class=navbar-brand href=/site/><span class=navbar-logo></span><span class=font-weight-bold>Purdue ARC</span></a><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/site/about/><span>About</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class="nav-link active" href=/site/wiki/><span class=active>Wiki</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/site/blog/><span>Blog</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/site/join/><span>Join</span></a></li></ul></div><div class="navbar-nav d-none d-lg-block"><input type=search class="form-control td-search-input" placeholder="&#xf002; Search this site…" aria-label="Search this site…" autocomplete=off></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><div class=td-content><div class="pageinfo pageinfo-primary d-print-none"><p>This is the multi-page printable view of this section.
<a href=# onclick="return print(),!1">Click here to print</a>.</p><p><a href=/site/wiki/active-projects/wizards-chess/>Return to the regular view of this page</a>.</p></div><h1 class=title>Wizard's Chess</h1><div class=lead>Building a giant, automated chess board</div><ul><li>1: <a href=#pg-443684d680c960d7f4e4cc6230251124>Software</a></li><li>2: <a href=#pg-c1fe4798378a51fdf5afb95fe2e6819c>Hardware</a></li><li>3: <a href=#pg-f1d1a2f654fdfaef02740bab72b0d54d></a></li><ul></ul></ul><div class=content><h2 id=goal>Goal</h2><p>Our goal for this project is to be able to create a fully autonomous, life sized chess game that people will be able to play using only voice commands. This project was inspired by the Wizard&rsquo;s Chess game in Harry Potter and the Philosopher&rsquo;s Stone. We will be exploring different hardware and software concepts, including engineering design, CAD, manufacturing, computer vision, and trajectory planning.</p><h2 id=subsystems>Subsystems</h2><h3 id=hardware>Hardware</h3><p>We are currently working on developing all 32 pieces for the game, as well as manufacturing the chess board ourselves. Navigate to our [hardware docs]({% link wiki/wizards-chess/hardware.md %}) to understand where we are at in terms of our hardware progress.</p><h4 id=battery-team>Battery Team</h4><p>The batteries team has been researching what types of batteries we need to power the robot as well as how to do it. Their mission is to successfully provide the amount of power to allow a full game of chess to run without needing any recharges. Currently, the upper bound that they have set for one full game is 2 hours.</p><h4 id=cad>CAD</h4><p>The CAD team is utilizing Fusion 360 to create a model of the basic chess piece. They are also our go-to team for laser cutting, 3D printing, CNCing, and general manufacturing, especially when it comes to needing certain files.</p><h3 id=software>Software</h3><p>We will be working on vision using apriltags to determine the positioning of each of the pieces on the board on an x,y coordinate plane and voice inputs to direct the pieces where to go. This will all be controlled by the overarching Raspberry Pi 4 controller, intakes voice commands, determines valid moves, and calculates the correct trajectory for each of the pieces. Navigate to our [software docs]({% link wiki/wizards-chess/software.md %}) to get a deeper dive into these concepts.</p><h4 id=computer-vision>Computer Vision</h4><p>This team is tasked with figuring out how to capture the position of all pieces on the board at all times. The current design is to use an overhead camera that will encompass the whole board, and then use Apriltags on each robot and 4 corners. With this information, we will be able to digitally map them on an xy-coordinate plane and perform the trajectory and pathing calculations correctly in order to move the correct chess pieces to the correct spots.</p><h4 id=voice-recognition>Voice Recognition</h4><p>This team is tasked with implementing full voice recognition capabilities for the chess game. They are looking into different voice recognition libraries that will be the best to implement in order to assist the creation of the software needed. The voice recognition software will take different commands (ie: Knight to e4) and use the trajectory planner to convert them to a point on the plane for the piece to move to.</p><h2 id=what-have-we-been-up-to>What have we been up to?</h2><h3 id=spring-2021>Spring 2021</h3><p>This spring was our first semester on this project!</p><ul><li>Designed the triangular chess pieces<ul><li>Each robot is about 9.75" x 7.75" and laser cut from .5" plywood and each square on the field is 1.5&rsquo; by 1.5'</li></ul></li></ul><img src=images/WC-prototype1.jpg alt="Chess Piece Prototype" width=400><ul><li>Put together prototype with motor movement</li></ul><div class=embed-container><iframe width=640 height=480 src=https://drive.google.com/file/d/18uXqdxGblfsNUdoEI2qEVPu5-sYCvQ7a/preview frameborder=0 allowfullscreen></iframe></div><ul><li>Wrote chess algorithm using Python</li><li>Simulated robot movement in ROS</li></ul><h2 id=plans-for-the-future>Plans for the Future</h2><p>We are planning on creating low-poly structures for each of the chess pieces and combining them with LED indicators to distinguish between the different pieces. We will also be looking into creating custom PCBs for each of the robots.</p></div></div><div class=td-content style=page-break-before:always><h1 id=pg-443684d680c960d7f4e4cc6230251124>1 - Software</h1><h2 id=system-overview>System Overview</h2><pre tabindex=0><code class=language-mermaid data-lang=mermaid>graph
  subgraph High Level
    HL1[Trajectory Planner]
    HL2[Voice Recognition]
  end
  subgraph Chess Piece Robot
    direction LR
    LL1[Differential Drive Controller]
    LL2[Driver]
    LL3[Motors] 
  end
  subgraph Vision 
    direction LR
    V1[Apriltag Localization]
  end
  subgraph Control
    C1[Trajectory Execution ROS nodes] 
  end
  %% Low level
  LL1 --&gt; LL2
  LL2 --&gt; LL3

  %% Behavior Planning
  HL2 --&gt; HL1
  HL1 --&gt; C1

  %% Vision 
  V1 --&gt; C1
  V1 --&gt; HL1

  %% Control 
  C1 --&gt; LL1

  %% Links
  click LL1 href &#34;http://wiki.purduearc.com/wiki/wizards-chess/software#differential-drive-controller&#34; &#34;Label&#34;
  click C1 href &#34;http://wiki.purduearc.com/wiki/wizards-chess/software#trajectory-execution-controller&#34; &#34;Label&#34;
  click HL1 href &#34;http://wiki.purduearc.com/wiki/wizards-chess/software#trajectory-planner&#34; &#34;Label&#34;
  click HL2 href &#34;http://wiki.purduearc.com/wiki/wizards-chess/software#voice-recognition&#34; &#34;Label&#34;
  click V1 href &#34;http://wiki.purduearc.com/wiki/wizards-chess/software#apriltag-localization&#34; &#34;Label&#34;

  classDef not_started fill:#ff8181
  classDef in_progress fill:#ffba82
  classDef done fill:#81ff9b
  class V1,HL1,HL2,LL1,C1 not_started
  %% class C1 in_progress
  class LL2,LL3 done
</code></pre><pre tabindex=0><code class=language-mermaid data-lang=mermaid>graph
  l1[Not Started]
  l2[In Progress]
  l3[Done]
classDef not_started fill:#ff8181
classDef in_progress fill:#ffba82
classDef done fill:#81ff9b
class l1 not_started
class l2 in_progress
class l3 done
</code></pre><h2 id=high-level>High Level</h2><h3 id=voice-recognition>Voice Recognition</h3><h4 id=problem>Problem</h4><p>Given a voice command such as &ldquo;Knight to e4&rdquo;, generate a machine readable command that can be inputted to the Trajectory Planner.</p><h4 id=potential-approach>Potential Approach</h4><p>Can use python-based speech recognition libraries to output raw text, which can easily be converted to a <a href>ROS message</a> that is consumed by the Trajectory Planner</p><pre tabindex=0><code class=language-mermaid data-lang=mermaid>graph LR 
  A1[Voice Input]
  A2[Speech Recognition Python Library]
  A3[ROS wrapper node]
  A4[Behavior Planner]

A1 --&gt; A2
A2 --&gt; A3
A3 --&gt; A4
</code></pre><h4 id=related>Related</h4><ul><li><a href=https://wiki.purduearc.com/wiki/wizards-chess/software#ros>ROS</a></li><li><a href=https://wiki.purduearc.com/wiki/wizards-chess/software#python>Python</a></li><li><a href=https://github.com/Uberi/speech_recognition>SpeechRecognition Python Library</a></li></ul><h3 id=trajectory-planner>Trajectory Planner</h3><h4 id=problem-1>Problem</h4><p>Given that we have just a camera which can localize (know the position of) each chess piece and find the center of any empty board square, how do we describe the movement of a chess piece from one square to another to complete a move using information we can actually execute on the robot, while not creating a collision with another piece?</p><h4 id=potential-approach-1>Potential Approach</h4><p>Since our input to the system is in pixels, we can:</p><ol><li>Query the x,y position of where the piece starts and ends</li><li>Create a time-dependent, x,y-coordinate-valued trajectory between the two x,y positions (could be as simple as a straight line)</li><li>If the above trajectory results in a collision (can be determined using the distance formula between pieces and knowing the radius of each piece), create a trajectory for the other piece to move out of the way. (Take a look at flocking algorithms, linked below)</li><li>Now that we have a set of trajectories, send them to the trajectory execution node of each respective chess piece to be executed concurrently</li></ol><h4 id=related-1>Related</h4><ul><li><a href=https://wiki.purduearc.com/wiki/wizards-chess/software#ros>ROS</a></li><li><a href=https://wiki.purduearc.com/wiki/wizards-chess/software#python>Python</a></li><li><a href=https://wiki.purduearc.com/wiki/wizards-chess/software#opencv>OpenCV</a></li><li><a href=https://codeheir.com/2021/03/27/the-flocking-algorithm/>Flocking Algorithm</a></li></ul><h2 id=vision>Vision</h2><h3 id=apriltag-localization>Apriltag Localization</h3><h4 id=problem-2>Problem</h4><p>How can we determine the position of each chess piece and every empty square on the board?</p><h4 id=potential-approach-2>Potential Approach</h4><p>Apriltags are a simple way to solve this accurately. With just an Apriltag on the four corners of the board (still need to measure square size manually) and an Apriltag on each chess piece, we can determine the xyz position of the entire system.</p><h4 id=related-2>Related</h4><ul><li><a href=https://wiki.purduearc.com/wiki/wizards-chess/software#ros>ROS</a></li><li><a href=https://github.com/AprilRobotics/apriltag_ros>Apriltag ROS library</a></li><li><a href=https://april.eecs.umich.edu/software/apriltag.html>Apriltag website</a></li></ul><h2 id=control>Control</h2><h3 id=trajectory-execution-controller-nodes>Trajectory Execution Controller Nodes</h3><h4 id=problem-3>Problem</h4><p>How do we ensure that the robot is correctly executing the trajectory given by the Trajectory Planner, and if it is inaccurate, how do we control for it?</p><h4 id=potential-approach-3>Potential Approach</h4><p>Fortunately, we can look at control theory to give us a good solution: an LQR controller. This essentially is an optimization algorithm with weighted costs that the algorithm minimizes.</p><p>Also, a Pure Pursuit algorithm may be used as well.</p><p>For any algorithm, the inputs are the trajectory itself, the current localized position of the chess piece, the target position, and the output is a <a href=http://docs.ros.org/en/api/geometry_msgs/html/msg/Twist.html>Twist</a> ROS message velocity command (the linear and angular velocity of the robot).</p><p>This would be running on the master computer that has access to camera input and the will be communicated to each robot as there will be a trajectory execution node for each robot.</p><h4 id=related-3>Related</h4><ul><li><a href=https://wiki.purduearc.com/wiki/wizards-chess/software#ros>ROS</a></li><li><a href=https://wiki.purduearc.com/wiki/wizards-chess/software#python>Python</a></li><li><a href=https://wiki.purduearc.com/wiki/wizards-chess/software#c++>C++</a></li><li><a href=https://sophistt.github.io/2020/05/02/lqr-controller-theory/>LQR Controller</a></li><li><a href=https://vinesmsuic.github.io/2020/09/29/robotics-purepersuit/#theoretical-derivation>Pure Pursuit Algorithm</a></li></ul><h2 id=robot>Robot</h2><h3 id=differential-drive-controller>Differential Drive Controller</h3><h4 id=problem-4>Problem</h4><p>The robot motors don&rsquo;t understand what Twist linear/angular velocity is, just the speed and direction at which they need to spin. So how do we convert the Twist to individual motor speeds (just a value between 0-255)?</p><h4 id=potential-approach-4>Potential Approach</h4><p>For different types of steering geometries, there are different control algorithms used to steer mobile vehicles (Skid-steer, Ackermann, differential drive, etc).</p><p>For our robot, it is a differential drive steering configuration, specific to the geometry of two wheels on either side and a caster wheel for stability.</p><p>This would be running on the robot.</p><h4 id=related-4>Related</h4><ul><li><a href=https://wiki.purduearc.com/wiki/wizards-chess/software#ros>ROS</a></li><li><a href=https://wiki.purduearc.com/wiki/wizards-chess/software#python>Python</a></li><li><a href=https://wiki.purduearc.com/wiki/wizards-chess/software#c++>Arduino/C++</a></li><li><a href=http://wiki.ros.org/diff_drive_controller>Differential Drive Controller ROS Package</a></li><li><a href="https://www.youtube.com/watch?v=aE7RQNhwnPQ&list=PLp8ijpvp8iCvFDYdcXqqYU5Ibl_aOqwjr&index=10">Differential Drive Robots lecture - recommended for understanding theory</a></li></ul><h2 id=problems-not-described-yet>Problems not described yet</h2><ul><li>Structuring the robot-level systems so they are modular and can easily spawned for all the chess pieces.</li><li>Ensuring that the system is controlled (i.e cameras can see all apriltags at all times, etc)</li><li>Playing against an engine</li><li>Simplifying the interface with a human (app?, website?)</li></ul><h1 id=resources>Resources</h1><h2 id=tools>Tools</h2><h3 id=ros>ROS</h3><ul><li><a href=https://wiki.purduearc.com/wiki/tutorials/snake-tutorial>ARC ROS tutorials (Recommended)</a></li><li><a href=http://wiki.ros.org/ROS/Tutorials>Official ROS tutorials</a></li></ul><h3 id=github>GitHub</h3><ul><li><a href=https://www.freecodecamp.org/news/learn-the-basics-of-git-in-under-10-minutes-da548267cc91/>Learn Git under 10 min</a></li></ul><h3 id=c>C++</h3><ul><li><a href="https://www.youtube.com/watch?v=18c3MTX0PK0&list=PLlrATfBNZ98dudnM48yfGUldqGD0S4FFb">In depth tutorial playlist for C++</a><ul><li>Recommended:<ul><li>if/else, loops, functions, classes</li><li>Pointers/References</li><li>Smart pointers</li><li>Dynamic Arrays (std::vector)</li></ul></li></ul></li><li>Very useful numeric libraries<ul><li><a href="https://eigen.tuxfamily.org/index.php?title=Main_Page">Eigen</a>: Extremely efficient matrix math library</li></ul></li></ul><h3 id=python>Python</h3><ul><li><a href="https://www.youtube.com/watch?v=rfscVS0vtbw">Tutorial</a></li><li>Important to understand:<ul><li>Basics are good - variables + logic, functions, classes</li></ul></li></ul><h3 id=numpy>Numpy</h3><blockquote><p>Must use when working with large arrays (i.e images)</p></blockquote><ul><li><a href="https://www.youtube.com/watch?v=8Y0qQEh7dJg">Tutorial</a></li><li>Important to understand:<ul><li>Creating arrays</li><li>slicing + indexing</li><li>reshaping</li><li>linear algebra</li></ul></li></ul><h2 id=opencv>OpenCV</h2><blockquote><p>Use for computer vision and image transformations like color detection, tracking, etc</p></blockquote><ul><li><a href="https://www.youtube.com/watch?v=oXlwWbU8l2o">Tutorial</a></li><li>Important to understand:<ul><li>image transformation</li><li>thresholding</li><li>read/write images from file</li><li>resizing</li><li>tracking</li></ul></li></ul></div><div class=td-content style=page-break-before:always><h1 id=pg-c1fe4798378a51fdf5afb95fe2e6819c>2 - Hardware</h1><h2 id=chess-pieces>Chess Pieces</h2><h3 id=design>Design</h3><p>Our current prototype design for the chess pieces has a wooden triangle base, 1" ball bearings, two wheels, and two motors. This was chosen to optimize efficiency, while lowering cost, since we have to build 32 chess pieces. The chess pieces themselves are 9.75" x 7.75" x .5", designed for maneuverability on the chess board, so that they can move between other chess pieces and we don&rsquo;t have to worry about moving other pieces out of the way. We are also using <a href=https://www.pitsco.com/TETRIX-DC-Gear-Motor>TETRIX Motors</a> and <a href=https://www.andymark.com/products/neverest-series-motor-only>Neverest Motors</a>.</p><img src=/wiki/active-projects/wizards-chess/images/cad-v1.png alt="CAD Model of Chess Piece V1" width=600><blockquote><p>Other designs have included an X-drive, 4-wheel drive, or 3-wheel triangle bot, however they were scrapped due to the cost and more complex systems they would have included.</p></blockquote><h3 id=manufacturing>Manufacturing</h3><p>The chess pieces are made from .5" birch plywood and manufactured using the laser cutting process. The hole markers are also included in the laser cutting process so that we don&rsquo;t have to remeasure where to drill the holes after every cut and to keep everything uniform.</p><p>We will also start manufacturing the motor mounts ourselves to cut down on cost, using the manual mill and CNC machine.</p><img src=/wiki/active-projects/wizards-chess/images/laser-cut.png alt="Laser Cut Lines" width=400>
<img src=/wiki/active-projects/wizards-chess/images/motor-mount.jpg alt="CAD Model of Motor Mount" width=400><h2 id=chess-board>Chess Board</h2><h3 id=design-1>Design</h3><p>Each square for the board is 1.5&rsquo; x 1.5&rsquo; to accomodate for the chess pieces moving around and between each other. It is then painted black and white accordingly.</p><blockquote><p>We also considered foam tiles (which would be too expensive) and tape (which is difficult to move).</p></blockquote><h3 id=manufacturing-1>Manufacturing</h3><p>The board is made from 5mm triply and manufactured using the vertical bandsaw. The triply is cut into pieces of 3&rsquo; x 1.5&rsquo; which accomodates 2 squares on the board. Paint and paintbrushes are available in our workspace to paint the board black and white.</p><blockquote><p>When manufacturing, the board is cut to exactly 3&rsquo; and then cut in half, so each piece is a little bit smaller that 1.5&rsquo; due to the saw size.</p></blockquote></div><div class=td-content style=page-break-before:always><h1 id=pg-f1d1a2f654fdfaef02740bab72b0d54d>3 -</h1></div></main></div></div><footer class="bg-dark py-5 row d-print-none"><div class="container-fluid mx-sm-5"><div class=row><div class="col-6 col-sm-4 text-xs-center order-sm-2"></div><div class="col-6 col-sm-4 text-right text-xs-center order-sm-3"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Twitter aria-label=Twitter><a class=text-white target=_blank rel=noopener href=https://mobile.twitter.com/purduerobotics aria-label=Twitter><i class="fab fa-twitter"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub><a class=text-white target=_blank rel=noopener href=https://github.com/purdue-arc aria-label=GitHub><i class="fab fa-github"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Discord aria-label=Discord><a class=text-white target=_blank rel=noopener href=https://discord.gg/ddkzfD2cyu aria-label=Discord><i class="fab fa-discord"></i></a></li></ul></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2"><small class=text-white>&copy; 2022 Purdue ARC All Rights Reserved</small>
<small class=ml-1><a href=https://policies.google.com/privacy target=_blank rel=noopener>Privacy Policy</a></small></div></div></div></footer></div><script src=https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js integrity=sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.min.js integrity="sha512-UR25UO94eTnCVwjbXozyeVd6ZqpaAE9naiEUBK/A+QDbfSTQFhPGj5lOR6d8tsgbBk84Ggb5A3EkjsOgPRPcKA==" crossorigin=anonymous></script>
<script src=/js/tabpane-persist.js></script>
<script src=/site/js/main.min.255c58c4d32820f9131250fc13cbbc0bb36fbece173429e6319b62ad26d9d46e.js integrity="sha256-JVxYxNMoIPkTElD8E8u8C7Nvvs4XNCnmMZtirSbZ1G4=" crossorigin=anonymous></script></body></html>